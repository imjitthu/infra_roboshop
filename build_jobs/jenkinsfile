pipeline {

  agent any

  environment {
    tfaction = "init"
    //http://lab.jithendar.com:8080/job/rs-build-jobs-pipelne/build/?token=build-roboshop
  }

  stages {
    stage('Installing DataBases') {
      parallel {
        stage ('Installing Mysql') {
          steps {
            build job: 'rs-seed-jobs/mysql', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
        stage ('Installing Mongo') {
          steps {
            build job: 'rs-seed-jobs/mongo', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
      }
    }
    stage ('installing Cache Server') {
      parallel {
        stage ('Installing redis') {
          steps {
            build job: 'rs-seed-jobs/redis', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
        stage ('Installing RabbitMQ Server') {
          steps {
            build job: 'rs-seed-jobs/rabbitmq', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
      }
    }
    stage ('Installing RoboShop Components') {
      parallel {
        stage ('Installing Catalogue') {
          steps {
          build job: 'rs-seed-jobs/catalogue', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
        stage ('Installing Cart') {
          steps {
            build job: 'rs-seed-jobs/cart', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
        stage ('Installing user') {
          steps {
            build job: 'rs-seed-jobs/user', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
        stage ('Installing Payment') {
          steps {
            build job: 'rs-seed-jobs/payment', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
        stage ('Installing Shipping') {
          steps {
            build job: 'rs-seed-jobs/shipping', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
          }
        }
      }
    }
    stage ('Installing Frontend') {
      steps {
        build job: 'rs-seed-jobs/frontend', parameters: [string(name: 'tfaction', value: "${env.tfaction}")]
      }
    }
    }  
    }  